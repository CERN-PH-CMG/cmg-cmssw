import FWCore.ParameterSet.Config as cms

from CMGTools.HtoZZ2l2nu.MVAStudyConfig_cfi import *

datapileup_pixelbased_2011=cms.vdouble(1.22825e+07,5.33316e+07,1.27819e+08,2.21102e+08,3.09325e+08,3.74101e+08,4.09049e+08,4.17488e+08,4.06878e+08,3.84466e+08,3.55412e+08,3.22755e+08,2.88141e+08,2.52593e+08,2.17008e+08,1.82346e+08,1.49605e+08,1.19698e+08,9.33203e+07,7.08679e+07,5.24176e+07,3.77691e+07,2.65207e+07,1.81566e+07,1.21265e+07,7.90616e+06,5.03513e+06,3.13451e+06,1.90872e+06,1.1377e+06,664248,380148,213407,117609,63687.5,0)

datapileup_ichep_2012=cms.vdouble(1.5451e-05,0.000100788,0.000396626,0.00113891,0.00262914,0.00516402,0.00895023,0.0140333,0.0202608,0.0272874,0.0346216,0.0417011,0.0479804,0.053012,0.0565029,0.058339,0.0585761,0.0574044,0.0550985,0.0519659,0.0483029,0.044365,0.0403523,0.0364078,0.0326242,0.0290553,0.0257273,0.0226496,0.019822,0.0172397,0.0148956,0.0127818,0.0108893,0.00920829,0.00772776,0.0064353,0.00531732,0.00435924,0.00354589,0.00286185,0.0022919,0.00182139,0.00143648,0.0011244,0.000873587,0.000673742,0.000515851,0.000392138,0.00029599,0.00022186,0.000165153,0.000122105,8.96737e-05,6.54205e-05,4.74151e-05,3.41437e-05,2.44304e-05,1.73704e-05,1.22738e-05,8.61939e-06,6.0163e-06,4.17416e-06,2.87891e-06,1.97393e-06,1.34559e-06,9.12007e-07,6.14631e-07,4.11897e-07,2.74504e-07,1.81936e-07,1.19929e-07,7.8631e-08,5.12798e-08,3.32667e-08,2.14686e-08,1.37834e-08,8.80413e-09,5.59523e-09,3.53812e-09,2.22623e-09,1.39391e-09,8.68533e-10,5.38572e-10,3.32375e-10,2.04155e-10,1.24813e-10,7.59525e-11,4.60076e-11,2.77422e-11,1.6653e-11,9.95184e-12,5.92094e-12,3.50729e-12,2.06854e-12,1.21475e-12,7.10314e-13,4.13596e-13,2.39816e-13,1.38476e-13,7.963e-14)


datapileup_71000_2012=cms.vdouble(9.98886e-06,6.83481e-05,0.000281893,0.0008436,0.00201517,0.00406698,0.00719606,0.0114544,0.0167151,0.0226874,0.0289723,0.0351392,0.0407968,0.0456441,0.0494911,0.0522548,0.0539387,0.0546063,0.0543553,0.0532982,0.0515496,0.0492208,0.0464171,0.0432394,0.0397855,0.0361513,0.0324304,0.0287128,0.025082,0.0216123,0.0183655,0.015389,0.0127143,0.0103572,0.00831936,0.00658984,0.00514831,0.0039677,0.00301712,0.00226427,0.00167748,0.00122714,0.000886668,0.000632956,0.000446531,0.000311396,0.000214719,0.000146433,9.87922e-05,6.59516e-05,4.35759e-05,2.85023e-05,1.84593e-05,1.18397e-05,7.52211e-06,4.73468e-06,2.95306e-06,1.82541e-06,1.11849e-06,6.79454e-07,4.09279e-07,2.44503e-07,1.44888e-07,8.51808e-08,4.96925e-08,2.87714e-08,1.65363e-08,9.43642e-09,5.3476e-09,3.01013e-09,1.68338e-09,9.355e-10,5.1674e-10,2.83771e-10,1.54965e-10,8.41732e-11,4.54875e-11,2.4462e-11,1.30942e-11,6.97831e-12,3.70348e-12,1.95772e-12,1.03102e-12,5.41065e-13,2.82994e-13,1.47547e-13,7.66978e-14,3.97556e-14,2.05512e-14,1.05962e-14,5.44991e-15,2.79635e-15,1.43151e-15,7.31179e-16,3.72654e-16,1.89521e-16,9.61825e-17,4.87113e-17,2.46188e-17,1.24168e-17)

datapileup_70300_2012=cms.vdouble(1.07136e-05,7.34842e-05,0.000302144,0.0009003,0.00214054,0.0042994,0.00757119,0.0119952,0.0174243,0.0235452,0.0299398,0.0361653,0.0418271,0.0466281,0.050387,0.0530314,0.0545751,0.0550901,0.0546808,0.0534645,0.0515597,0.0490808,0.0461365,0.0428308,0.0392652,0.0355386,0.0317474,0.0279831,0.0243299,0.0208608,0.0176357,0.0146985,0.0120768,0.00978206,0.00781167,0.00615097,0.00477641,0.00365852,0.00276474,0.00206184,0.00151783,0.00110326,0.000792022,0.000561729,0.000393701,0.000272756,0.000186838,0.000126576,8.48286e-05,5.62521e-05,3.69183e-05,2.39853e-05,1.5429e-05,9.82905e-06,6.20219e-06,3.87723e-06,2.4017e-06,1.4744e-06,8.97192e-07,5.4126e-07,3.23782e-07,1.92089e-07,1.1304e-07,6.59968e-08,3.82344e-08,2.19843e-08,1.25482e-08,7.11134e-09,4.00234e-09,2.2375e-09,1.24278e-09,6.85978e-10,3.76365e-10,2.05303e-10,1.11371e-10,6.00961e-11,3.22643e-11,1.72387e-11,9.16844e-12,4.85512e-12,2.56044e-12,1.34504e-12,7.03975e-13,3.67167e-13,1.90871e-13,9.89141e-14,5.11084e-14,2.63333e-14,1.35318e-14,6.93571e-15,3.54617e-15,1.80883e-15,9.20535e-16,4.67425e-16,2.3683e-16,1.19737e-16,6.04093e-17,3.04137e-17,1.52803e-17,7.66115e-18)

datapileup_70000_2012=cms.vdouble(1.10436e-05,7.58141e-05,0.000311292,0.000925808,0.00219671,0.00440309,0.00773785,0.0122344,0.0177366,0.0239214,0.0303622,0.0366114,0.0422731,0.047052,0.0507709,0.053362,0.0548437,0.0552916,0.054813,0.0535272,0.0515544,0.0490105,0.0460055,0.0426451,0.0390321,0.0352668,0.0314468,0.0276642,0.0240032,0.0205364,0.0173224,0.0144037,0.0118061,0.00953915,0.0075984,0.00596759,0.00462184,0.00353069,0.00266094,0.00197902,0.00145285,0.00105309,0.0007539,0.000533189,0.000372641,0.000257432,0.000175838,0.000118782,7.93759e-05,5.2484e-05,3.43452e-05,2.22485e-05,1.42699e-05,9.06389e-06,5.7025e-06,3.5543e-06,2.19513e-06,1.34357e-06,8.1514e-07,4.90288e-07,2.92412e-07,1.72958e-07,1.01476e-07,5.90676e-08,3.41175e-08,1.95583e-08,1.11302e-08,6.28891e-09,3.52895e-09,1.96702e-09,1.08933e-09,5.99519e-10,3.27973e-10,1.78389e-10,9.64935e-11,5.192e-11,2.77961e-11,1.48098e-11,7.8548e-12,4.14805e-12,2.1816e-12,1.14294e-12,5.96595e-13,3.10336e-13,1.60902e-13,8.31654e-14,4.28594e-14,2.20259e-14,1.12892e-14,5.77146e-15,2.94335e-15,1.49752e-15,7.60163e-16,3.85009e-16,1.94575e-16,9.81233e-17,4.93784e-17,2.47965e-17,1.24262e-17,6.21412e-18)

datapileup_69400_2012=cms.vdouble(1.17406e-05,8.07202e-05,0.000330485,0.00097912,0.00231365,0.00461816,0.00808215,0.0127267,0.0183769,0.0246895,0.0312214,0.037515,0.0431725,0.0479032,0.0515379,0.0540187,0.0553728,0.0556834,0.0550634,0.0536364,0.0515259,0.0488507,0.0457238,0.0422541,0.0385473,0.0347067,0.0308317,0.0270156,0.0233425,0.0198837,0.0166954,0.0138167,0.0112697,0.00906023,0.00717997,0.00560953,0.00432148,0.00328347,0.00246114,0.00182035,0.00132894,0.000957892,0.000681882,0.000479521,0.000333223,0.000228882,0.000155437,0.000104394,6.93555e-05,4.5591e-05,2.96597e-05,1.91003e-05,1.21784e-05,7.68958e-06,4.8091e-06,2.97957e-06,1.82917e-06,1.11286e-06,6.71106e-07,4.01223e-07,2.37848e-07,1.39834e-07,8.15464e-08,4.718e-08,2.70867e-08,1.54343e-08,8.73043e-09,4.9034e-09,2.73505e-09,1.51544e-09,8.34282e-10,4.56449e-10,2.48245e-10,1.3424e-10,7.21941e-11,3.86232e-11,2.05602e-11,1.08929e-11,5.7452e-12,3.01724e-12,1.57818e-12,8.22321e-13,4.26928e-13,2.20893e-13,1.13921e-13,5.85723e-14,3.00274e-14,1.53511e-14,7.82733e-15,3.98095e-15,2.01977e-15,1.02234e-15,5.16289e-16,2.60149e-16,1.30799e-16,6.5622e-17,3.28528e-17,1.64126e-17,8.18222e-18,4.07055e-18)

datapileup_70800_2012=cms.vdouble(1.16693e-05,7.82065e-05,0.000317178,0.000935576,0.00220662,0.00440397,0.00771772,0.012185,0.0176606,0.0238351,0.0302931,0.0365892,0.0423203,0.0471761,0.0509619,0.0535954,0.0550873,0.0555135,0.0549882,0.0536418,0.0516067,0.0490084,0.0459633,0.0425792,0.0389574,0.0351945,0.0313831,0.0276108,0.0239585,0.020497,0.0172844,0.0143638,0.0117622,0.00949079,0.00754626,0.00591328,0.00456739,0.00347815,0.00261209,0.00193515,0.00141473,0.00102098,0.000727609,0.000512252,0.000356398,0.000245143,0.000166761,0.000112234,7.47587e-05,4.9301e-05,3.21996e-05,2.08345e-05,1.33592e-05,8.49109e-06,5.35115e-06,3.34454e-06,2.07362e-06,1.27561e-06,7.78735e-07,4.71873e-07,2.83859e-07,1.69548e-07,1.00571e-07,5.92523e-08,3.46787e-08,2.01657e-08,1.16526e-08,6.69212e-09,3.82033e-09,2.16824e-09,1.22363e-09,6.86754e-10,3.83382e-10,2.12918e-10,1.17656e-10,6.47003e-11,3.54125e-11,1.92945e-11,1.04665e-11,5.65359e-12,3.04131e-12,1.62956e-12,8.69772e-13,4.62508e-13,2.45054e-13,1.29383e-13,6.8078e-14,3.5702e-14,1.86625e-14,9.72469e-15,5.05173e-15,2.61633e-15,1.35102e-15,6.95618e-16,3.57146e-16,1.82856e-16,9.33638e-17,4.75417e-17,2.41442e-17,1.22296e-17)


blinding=True
if(@is2011):
   datapileupToUse=datapileup_pixelbased_2011
   blinding=False
else:
#   datapileupToUse=datapileup_69400_2012
#   datapileupToUse=datapileup_70000_2012
   datapileupToUse=datapileup_70300_2012
#   datapileupToUse=datapileup_70800_2012
#   datapileupToUse=datapileup_71000_2012  	
   blinding=True

#use this if you don't want to apply any weight
#datapileupToUse=cms.vdouble()

runProcess = cms.PSet(
    input = cms.string("@input"),
    outdir = cms.string("@outdir"),
    isMC = cms.bool(@isMC),
    is2011 = cms.bool(@is2011),
    mctruthmode=cms.int32(@mctruthmode),
    runBlinded = cms.bool(blinding),
    xsec = cms.double(@xsec),	
    saveSummaryTree = cms.bool(@saveSummaryTree),
    runSystematics = cms.bool(@runSystematics),	
    weightsFile = cms.vstring(@weightsFile),	 
    hqtWeightsFile = cms.vstring(
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/HiggsQtWeights.root",
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/LineShapeWeights.root"		
    ),
    evStart = cms.int32(0),
    evEnd = cms.int32(-1),
    dirName = cms.string("evAnalyzer/data"),
    ptResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PtResolution_AK5PF.txt"),
    phiResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PhiResolution_AK5PF.txt"),
    etaResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_EtaResolution_AK5PF.txt"),
    jesUncFileName = cms.string("${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/GR_R_42_V23_AK5PFchs_Uncertainty.txt"),
    #datapileup = datapileup_683_2012,
    datapileup = datapileupToUse,
    useMVA = cms.bool(@useMVA),	
    tmvaInput = simpleDiscriminator
    )
