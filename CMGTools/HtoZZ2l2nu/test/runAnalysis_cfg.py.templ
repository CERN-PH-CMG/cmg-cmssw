import FWCore.ParameterSet.Config as cms

from CMGTools.HtoZZ2l2nu.MVAStudyConfig_cfi import *

datapileup_pixelbased_2011=cms.vdouble(1.22825e+07,5.33316e+07,1.27819e+08,2.21102e+08,3.09325e+08,3.74101e+08,4.09049e+08,4.17488e+08,4.06878e+08,3.84466e+08,3.55412e+08,3.22755e+08,2.88141e+08,2.52593e+08,2.17008e+08,1.82346e+08,1.49605e+08,1.19698e+08,9.33203e+07,7.08679e+07,5.24176e+07,3.77691e+07,2.65207e+07,1.81566e+07,1.21265e+07,7.90616e+06,5.03513e+06,3.13451e+06,1.90872e+06,1.1377e+06,664248,380148,213407,117609,63687.5,0)

datapileup_ichep_2012=cms.vdouble(1.5451e-05,0.000100788,0.000396626,0.00113891,0.00262914,0.00516402,0.00895023,0.0140333,0.0202608,0.0272874,0.0346216,0.0417011,0.0479804,0.053012,0.0565029,0.058339,0.0585761,0.0574044,0.0550985,0.0519659,0.0483029,0.044365,0.0403523,0.0364078,0.0326242,0.0290553,0.0257273,0.0226496,0.019822,0.0172397,0.0148956,0.0127818,0.0108893,0.00920829,0.00772776,0.0064353,0.00531732,0.00435924,0.00354589,0.00286185,0.0022919,0.00182139,0.00143648,0.0011244,0.000873587,0.000673742,0.000515851,0.000392138,0.00029599,0.00022186,0.000165153,0.000122105,8.96737e-05,6.54205e-05,4.74151e-05,3.41437e-05,2.44304e-05,1.73704e-05,1.22738e-05,8.61939e-06,6.0163e-06,4.17416e-06,2.87891e-06,1.97393e-06,1.34559e-06,9.12007e-07,6.14631e-07,4.11897e-07,2.74504e-07,1.81936e-07,1.19929e-07,7.8631e-08,5.12798e-08,3.32667e-08,2.14686e-08,1.37834e-08,8.80413e-09,5.59523e-09,3.53812e-09,2.22623e-09,1.39391e-09,8.68533e-10,5.38572e-10,3.32375e-10,2.04155e-10,1.24813e-10,7.59525e-11,4.60076e-11,2.77422e-11,1.6653e-11,9.95184e-12,5.92094e-12,3.50729e-12,2.06854e-12,1.21475e-12,7.10314e-13,4.13596e-13,2.39816e-13,1.38476e-13,7.963e-14)

datapileup_69400_2012=cms.vdouble(1.34105e-05,9.02512e-05,0.000363723,0.00106362,0.00248535,0.00491361,0.00853041,0.0133443,0.0191668,0.0256416,0.0323136,0.0387133,0.0444313,0.0491668,0.0527446,0.0551065,0.0562864,0.05638,0.0555165,0.0538373,0.0514825,0.0485835,0.0452626,0.0416332,0.0378026,0.0338728,0.029941,0.0260974,0.0224227,0.0189848,0.0158363,0.0130129,0.0105326,0.00839763,0.00659588,0.00510453,0.00389313,0.00292696,0.00216989,0.00158674,0.00114492,0.000815463,0.000573536,0.000398485,0.000273607,0.000185727,0.000124687,8.28179e-05,5.44431e-05,3.54344e-05,2.2841e-05,1.45864e-05,9.23098e-06,5.79078e-06,3.60186e-06,2.22188e-06,1.35961e-06,8.25471e-07,4.97354e-07,2.97433e-07,1.76582e-07,1.04091e-07,6.09348e-08,3.54298e-08,2.04642e-08,1.1744e-08,6.69731e-09,3.79594e-09,2.13867e-09,1.19797e-09,6.67268e-10,3.69638e-10,2.03679e-10,1.11657e-10,6.09065e-11,3.30637e-11,1.78655e-11,9.61008e-12,5.14693e-12,2.74499e-12,1.45803e-12,7.71398e-13,4.06568e-13,2.13491e-13,1.11703e-13,5.82419e-14,3.02642e-14,1.56742e-14,8.09171e-15,4.16415e-15,2.13636e-15,1.09273e-15,5.57275e-16,2.83379e-16,1.43691e-16,7.26565e-17,3.66374e-17,1.84246e-17,9.24075e-18,4.62242e-18)

datapileup_70000_2012=cms.vdouble(1.26286e-05,8.48564e-05,0.000342941,0.00100663,0.00236168,0.00468822,0.00817217,0.012835,0.0185073,0.0248533,0.031435,0.037793,0.0435201,0.0483111,0.0519818,0.0544637,0.0557805,0.0560193,0.055303,0.0537683,0.0515518,0.0487826,0.0455801,0.0420556,0.0383134,0.0344534,0.0305708,0.0267549,0.0230867,0.0196355,0.0164566,0.0135889,0.0110546,0.00885957,0.00699569,0.00544324,0.00417426,0.00315575,0.00235263,0.00173008,0.00125544,0.000899274,0.000636095,0.000444478,0.000306932,0.00020954,0.000141477,9.45066e-05,6.24812e-05,4.08976e-05,2.65125e-05,1.70272e-05,1.08369e-05,6.83681e-06,4.27663e-06,2.65311e-06,1.63272e-06,9.96921e-07,6.04074e-07,3.63313e-07,2.16924e-07,1.28602e-07,7.57133e-08,4.42742e-08,2.57189e-08,1.48438e-08,8.5134e-09,4.85279e-09,2.74968e-09,1.54898e-09,8.67673e-10,4.83372e-10,2.67852e-10,1.47662e-10,8.09977e-11,4.42159e-11,2.40245e-11,1.29947e-11,6.99813e-12,3.75285e-12,2.00431e-12,1.06623e-12,5.65029e-13,2.98317e-13,1.56935e-13,8.22695e-14,4.29814e-14,2.23811e-14,1.16166e-14,6.01042e-15,3.10022e-15,1.5943e-15,8.17453e-16,4.17925e-16,2.13058e-16,1.08314e-16,5.49131e-17,2.77646e-17,1.40006e-17,7.04139e-18)

datapileup_70300_2012=cms.vdouble(1.22581e-05,8.22924e-05,0.000333027,0.000979342,0.00230225,0.0045795,0.00799871,0.0125874,0.0181855,0.0244671,0.0310029,0.0373385,0.0430682,0.0478846,0.0515997,0.0541395,0.055523,0.0558329,0.0551889,0.0537254,0.0515773,0.0488725,0.0457292,0.0422572,0.0385598,0.0347358,0.0308791,0.0270788,0.0234155,0.0199595,0.016767,0.0138787,0.0113184,0.00909429,0.00719986,0.00561707,0.00431924,0.00327433,0.00244779,0.0018051,0.00131355,0.000943552,0.000669301,0.000469004,0.000324786,0.000222356,0.000150555,0.000100855,6.68666e-05,4.38915e-05,2.85335e-05,1.83767e-05,1.17287e-05,7.4202e-06,4.65461e-06,2.89571e-06,1.78703e-06,1.09421e-06,6.64895e-07,4.0102e-07,2.40115e-07,1.42752e-07,8.42818e-08,4.9424e-08,2.87917e-08,1.66643e-08,9.58452e-09,5.47878e-09,3.11313e-09,1.75866e-09,9.87893e-10,5.51887e-10,3.06673e-10,1.69534e-10,9.32536e-11,5.10471e-11,2.78127e-11,1.50851e-11,8.1461e-12,4.38039e-12,2.34583e-12,1.25129e-12,6.64893e-13,3.51989e-13,1.85669e-13,9.75943e-14,5.11246e-14,2.66927e-14,1.38916e-14,7.20672e-15,3.72721e-15,1.92185e-15,9.88035e-16,5.06485e-16,2.58896e-16,1.31969e-16,6.70845e-17,3.40094e-17,1.71956e-17,8.67145e-18)

datapileup_70800_2012=cms.vdouble(1.16693e-05,7.82065e-05,0.000317178,0.000935576,0.00220662,0.00440397,0.00771772,0.012185,0.0176606,0.0238351,0.0302931,0.0365892,0.0423203,0.0471761,0.0509619,0.0535954,0.0550873,0.0555135,0.0549882,0.0536418,0.0516067,0.0490084,0.0459633,0.0425792,0.0389574,0.0351945,0.0313831,0.0276108,0.0239585,0.020497,0.0172844,0.0143638,0.0117622,0.00949079,0.00754626,0.00591328,0.00456739,0.00347815,0.00261209,0.00193515,0.00141473,0.00102098,0.000727609,0.000512252,0.000356398,0.000245143,0.000166761,0.000112234,7.47587e-05,4.9301e-05,3.21996e-05,2.08345e-05,1.33592e-05,8.49109e-06,5.35115e-06,3.34454e-06,2.07362e-06,1.27561e-06,7.78735e-07,4.71873e-07,2.83859e-07,1.69548e-07,1.00571e-07,5.92523e-08,3.46787e-08,2.01657e-08,1.16526e-08,6.69212e-09,3.82033e-09,2.16824e-09,1.22363e-09,6.86754e-10,3.83382e-10,2.12918e-10,1.17656e-10,6.47003e-11,3.54125e-11,1.92945e-11,1.04665e-11,5.65359e-12,3.04131e-12,1.62956e-12,8.69772e-13,4.62508e-13,2.45054e-13,1.29383e-13,6.8078e-14,3.5702e-14,1.86625e-14,9.72469e-15,5.05173e-15,2.61633e-15,1.35102e-15,6.95618e-16,3.57146e-16,1.82856e-16,9.33638e-17,4.75417e-17,2.41442e-17,1.22296e-17)

datapileup_71000_2012=cms.vdouble(1.14435e-05,7.66353e-05,0.000311066,0.000918649,0.00216952,0.00433569,0.0076081,0.0120276,0.0174546,0.0235863,0.0300129,0.0362925,0.0420232,0.0468936,0.0507065,0.0533765,0.0549109,0.0553828,0.0549043,0.0536043,0.0516139,0.049058,0.046052,0.0427032,0.0391119,0.0353739,0.0315812,0.0278209,0.0241738,0.020711,0.0174912,0.0145585,0.011941,0.00965116,0.00768691,0.00603401,0.00466891,0.00356186,0.00267981,0.00198896,0.00145675,0.00105324,0.000751997,0.000530406,0.000369716,0.000254776,0.000173637,0.000117078,7.81302e-05,5.16199e-05,3.37765e-05,2.18952e-05,1.40653e-05,8.95638e-06,5.6548e-06,3.54085e-06,2.19939e-06,1.35548e-06,8.29024e-07,5.03276e-07,3.03311e-07,1.81503e-07,1.07862e-07,6.3666e-08,3.73312e-08,2.17484e-08,1.25906e-08,7.24419e-09,4.14316e-09,2.35581e-09,1.33194e-09,7.48921e-10,4.18855e-10,2.33045e-10,1.29013e-10,7.10748e-11,3.89721e-11,2.12723e-11,1.15602e-11,6.25555e-12,3.37115e-12,1.80951e-12,9.6754e-13,5.1541e-13,2.73567e-13,1.44692e-13,7.62676e-14,4.00673e-14,2.09812e-14,1.09521e-14,5.69934e-15,2.95691e-15,1.52957e-15,7.88932e-16,4.05766e-16,2.08113e-16,1.06447e-16,5.42988e-17,2.76244e-17,1.4017e-17)

mcpileup_tsg=cms.vdouble(0,0,0,0,0,0,0,0,0,0,0,0,6,9,14,28,56,106,212,339,549,848,1210,1727,2197,2857,3589,4303,4786,5202,5632,5941,5835,5660,5248,4886,4459,3764,3199,2623,2119,1609,1176,891,661,508,351,228,137,102,64,47,17,11,11,4,5,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)

blinding=True
if(@is2011):
   datapileupToUse=datapileup_pixelbased_2011
   blinding=False
else:
#   datapileupToUse=datapileup_69400_2012
#   datapileupToUse=datapileup_70000_2012
#   datapileupToUse=datapileup_70300_2012
   datapileupToUse=datapileup_70800_2012
#   datapileupToUse=datapileup_71000_2012  	
   blinding=False

#use this if you don't want to apply any weight
#datapileupToUse=cms.vdouble()

runProcess = cms.PSet(
    input = cms.string("@input"),
    outdir = cms.string("@outdir"),
    isMC = cms.bool(@isMC),
    is2011 = cms.bool(@is2011),
    mctruthmode=cms.int32(@mctruthmode),
    runBlinded = cms.bool(blinding),
    xsec = cms.double(@xsec),	
    saveSummaryTree = cms.bool(@saveSummaryTree),
    runSystematics = cms.bool(@runSystematics),	
    weightsFile = cms.vstring(@weightsFile),	 
    hqtWeightsFile = cms.vstring(
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/HiggsQtWeights.root",
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/LineShapeWeights.root"		
    ),
    evStart = cms.int32(0),
    evEnd = cms.int32(-1),
    dirName = cms.string("evAnalyzer/data"),
    ptResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PtResolution_AK5PF.txt"),
    phiResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PhiResolution_AK5PF.txt"),
    etaResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_EtaResolution_AK5PF.txt"),
    jesUncFileName = cms.string("${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/GR_R_42_V23_AK5PFchs_Uncertainty.txt"),
    #datapileup = datapileup_683_2012,
    datapileup = datapileupToUse,
    useMVA = cms.bool(@useMVA),	
    tmvaInput = simpleDiscriminator
    )
