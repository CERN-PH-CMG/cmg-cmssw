import FWCore.ParameterSet.Config as cms

from CMGTools.HtoZZ2l2nu.MVAStudyConfig_cfi import *

datapileup_pixelbased_2011=cms.vdouble(1.22825e+07,5.33316e+07,1.27819e+08,2.21102e+08,3.09325e+08,3.74101e+08,4.09049e+08,4.17488e+08,4.06878e+08,3.84466e+08,3.55412e+08,3.22755e+08,2.88141e+08,2.52593e+08,2.17008e+08,1.82346e+08,1.49605e+08,1.19698e+08,9.33203e+07,7.08679e+07,5.24176e+07,3.77691e+07,2.65207e+07,1.81566e+07,1.21265e+07,7.90616e+06,5.03513e+06,3.13451e+06,1.90872e+06,1.1377e+06,664248,380148,213407,117609,63687.5,0)

#datapileup_ichep_2012=cms.vdouble(1.5451e-05,0.000100788,0.000396626,0.00113891,0.00262914,0.00516402,0.00895023,0.0140333,0.0202608,0.0272874,0.0346216,0.0417011,0.0479804,0.053012,0.0565029,0.058339,0.0585761,0.0574044,0.0550985,0.0519659,0.0483029,0.044365,0.0403523,0.0364078,0.0326242,0.0290553,0.0257273,0.0226496,0.019822,0.0172397,0.0148956,0.0127818,0.0108893,0.00920829,0.00772776,0.0064353,0.00531732,0.00435924,0.00354589,0.00286185,0.0022919,0.00182139,0.00143648,0.0011244,0.000873587,0.000673742,0.000515851,0.000392138,0.00029599,0.00022186,0.000165153,0.000122105,8.96737e-05,6.54205e-05,4.74151e-05,3.41437e-05,2.44304e-05,1.73704e-05,1.22738e-05,8.61939e-06,6.0163e-06,4.17416e-06,2.87891e-06,1.97393e-06,1.34559e-06,9.12007e-07,6.14631e-07,4.11897e-07,2.74504e-07,1.81936e-07,1.19929e-07,7.8631e-08,5.12798e-08,3.32667e-08,2.14686e-08,1.37834e-08,8.80413e-09,5.59523e-09,3.53812e-09,2.22623e-09,1.39391e-09,8.68533e-10,5.38572e-10,3.32375e-10,2.04155e-10,1.24813e-10,7.59525e-11,4.60076e-11,2.77422e-11,1.6653e-11,9.95184e-12,5.92094e-12,3.50729e-12,2.06854e-12,1.21475e-12,7.10314e-13,4.13596e-13,2.39816e-13,1.38476e-13,7.963e-14)

#datapileup_70300_2012=cms.vdouble(8.83649e-06,6.1823e-05,0.000257016,0.000774196,0.00186102,0.00377785,0.00671872,0.0107396,0.0157229,0.021392,0.0273669,0.0332408,0.0386505,0.0433227,0.0470908,0.0498864,0.0517164,0.052636,0.0527252,0.0520727,0.0507669,0.0488931,0.0465338,0.0437707,0.040687,0.0373678,0.0339001,0.0303704,0.0268622,0.0234523,0.0202074,0.0171821,0.0144164,0.011936,0.00975206,0.00786342,0.00625829,0.00491692,0.00381416,0.00292184,0.00221081,0.00165264,0.00122077,0.000891281,0.000643312,0.000459151,0.000324129,0.000226367,0.000156438,0.000107007,7.24646e-05,4.85951e-05,3.2279e-05,2.12433e-05,1.38551e-05,8.95775e-06,5.74268e-06,3.65158e-06,2.3037e-06,1.44241e-06,8.96611e-07,5.53505e-07,3.39462e-07,2.06905e-07,1.25378e-07,7.55625e-08,4.53103e-08,2.70435e-08,1.60722e-08,9.51486e-09,5.61318e-09,3.30105e-09,1.93588e-09,1.13247e-09,6.61019e-10,3.85075e-10,2.23925e-10,1.30002e-10,7.53584e-11,4.3618e-11,2.52089e-11,1.45472e-11,8.38127e-12,4.82053e-12,2.76742e-12,1.58556e-12,9.0645e-13,5.16989e-13,2.94115e-13,1.66868e-13,9.43998e-14,5.32406e-14,2.99309e-14,1.67703e-14,9.36369e-15,5.20941e-15,2.88748e-15,1.59441e-15,8.7699e-16,4.8048e-16)

#datapileup_70300_2012=cms.vdouble(1.07136e-05,7.34842e-05,0.000302144,0.0009003,0.00214054,0.0042994,0.00757119,0.0119952,0.0174243,0.0235452,0.0299398,0.0361653,0.0418271,0.0466281,0.050387,0.0530314,0.0545751,0.0550901,0.0546808,0.0534645,0.0515597,0.0490808,0.0461365,0.0428308,0.0392652,0.0355386,0.0317474,0.0279831,0.0243299,0.0208608,0.0176357,0.0146985,0.0120768,0.00978206,0.00781167,0.00615097,0.00477641,0.00365852,0.00276474,0.00206184,0.00151783,0.00110326,0.000792022,0.000561729,0.000393701,0.000272756,0.000186838,0.000126576,8.48286e-05,5.62521e-05,3.69183e-05,2.39853e-05,1.5429e-05,9.82905e-06,6.20219e-06,3.87723e-06,2.4017e-06,1.4744e-06,8.97192e-07,5.4126e-07,3.23782e-07,1.92089e-07,1.1304e-07,6.59968e-08,3.82344e-08,2.19843e-08,1.25482e-08,7.11134e-09,4.00234e-09,2.2375e-09,1.24278e-09,6.85978e-10,3.76365e-10,2.05303e-10,1.11371e-10,6.00961e-11,3.22643e-11,1.72387e-11,9.16844e-12,4.85512e-12,2.56044e-12,1.34504e-12,7.03975e-13,3.67167e-13,1.90871e-13,9.89141e-14,5.11084e-14,2.63333e-14,1.35318e-14,6.93571e-15,3.54617e-15,1.80883e-15,9.20535e-16,4.67425e-16,2.3683e-16,1.19737e-16,6.04093e-17,3.04137e-17,1.52803e-17,7.66115e-18)

#datapileup_70300_2012=cms.vdouble(1.08886e-05,7.39359e-05,0.000301983,0.000896881,0.0021294,0.0042749,0.00752766,0.0119284,0.0173328,0.0234314,0.0298101,0.0360294,0.0416966,0.0465148,0.050301,0.0529801,0.0545624,0.055116,0.0547419,0.0535545,0.0516707,0.0492038,0.0462627,0.0429524,0.0393759,0.0356341,0.0318253,0.028043,0.0243726,0.0208885,0.0176509,0.014704,0.0120753,0.00977609,0.00780312,0.00614137,0.00476683,0.00364963,0.00275691,0.00205523,0.00151244,0.00109899,0.000788726,0.00055924,0.00039186,0.000271419,0.000185884,0.000125907,8.4366e-05,5.5937e-05,3.67065e-05,2.38448e-05,1.5337e-05,9.76949e-06,6.16409e-06,3.85312e-06,2.38661e-06,1.46505e-06,8.91454e-07,5.37773e-07,3.21683e-07,1.90837e-07,1.123e-07,6.55628e-08,3.79822e-08,2.18388e-08,1.24649e-08,7.06404e-09,3.97567e-09,2.22256e-09,1.23447e-09,6.81387e-10,3.73843e-10,2.03926e-10,1.10624e-10,5.96925e-11,3.20475e-11,1.71228e-11,9.10679e-12,4.82245e-12,2.54321e-12,1.33599e-12,6.99236e-13,3.64695e-13,1.89585e-13,9.8248e-14,5.07642e-14,2.61559e-14,1.34406e-14,6.88899e-15,3.52228e-15,1.79665e-15,9.14333e-16,4.64276e-16,2.35234e-16,1.18931e-16,6.00023e-17,3.02088e-17,1.51774e-17,7.60954e-18)

datapileup_70300_2012=cms.vdouble(8.09479e-06,5.64253e-05,0.000234438,0.000708129,0.0017105,0.00349358,0.00625553,0.0100708,0.0148505,0.020349,0.0262113,0.0320441,0.0374847,0.0422506,0.0461603,0.0491294,0.0511502,0.0522664,0.0525496,0.0520821,0.0509474,0.0492268,0.0469996,0.0443453,0.0413455,0.0380853,0.0346522,0.0311346,0.0276184,0.0241833,0.0208995,0.0178247,0.0150024,0.0124611,0.0102148,0.00826464,0.00660065,0.00520452,0.00405205,0.00311564,0.00236635,0.00177563,0.00131662,0.000964921,0.000699098,0.000500836,0.000354862,0.00024873,0.000172505,0.00011841,8.04614e-05,5.41399e-05,3.60823e-05,2.38255e-05,1.55917e-05,1.01156e-05,6.50871e-06,4.15502e-06,2.63279e-06,1.65666e-06,1.03577e-06,6.43829e-07,3.98156e-07,2.45158e-07,1.50427e-07,9.20683e-08,5.62672e-08,3.43759e-08,2.10198e-08,1.28799e-08,7.91828e-09,4.88962e-09,3.03584e-09,1.89664e-09,1.19296e-09,7.55627e-10,4.81954e-10,3.09438e-10,1.99876e-10,1.2979e-10,8.46506e-11,5.54024e-11,3.63523e-11,2.38919e-11,1.57154e-11,1.0338e-11,6.79661e-12,4.46326e-12,2.9262e-12,1.91457e-12,1.24969e-12,8.13541e-13,5.2808e-13,3.41728e-13,2.20422e-13,1.417e-13,9.07784e-14,5.79506e-14,3.68613e-14,2.33614e-14)

blinding=True
if(@is2011):
   datapileupToUse=datapileup_pixelbased_2011
   blinding=False
else:
   datapileupToUse=datapileup_70300_2012
   blinding=True
blinding=False

#use this if you don't want to apply any weight
#datapileupToUse=cms.vdouble()

runProcess = cms.PSet(
    input = cms.string("@input"),
    outdir = cms.string("@outdir"),
    suffix = cms.string("@suffix"),
    isMC = cms.bool(@isMC),
    is2011 = cms.bool(@is2011),
    mctruthmode=cms.int32(@mctruthmode),
    runBlinded = cms.bool(blinding),
    xsec = cms.double(@xsec),	
    cprime = cms.double(@cprime),	
    brnew = cms.double(@brnew),	
    saveSummaryTree = cms.bool(@saveSummaryTree),
    runSystematics = cms.bool(@runSystematics),	
    weightsFile = cms.vstring(@weightsFile),	 
    hqtWeightsFile = cms.vstring(
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/HiggsQtWeights.root",
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/LineShapes.root",
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/ShapeInterferences.root"
    ),
    evStart = cms.int32(0),
    evEnd = cms.int32(-1),
    dirName = cms.string("evAnalyzer/data"),
    ptResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PtResolution_AK5PF.txt"),
    phiResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PhiResolution_AK5PF.txt"),
    etaResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_EtaResolution_AK5PF.txt"),
    jesUncFileName = cms.string("${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/GR_R_42_V23_AK5PFchs_Uncertainty.txt"),
    #datapileup = datapileup_683_2012,
    datapileup = datapileupToUse,
    useMVA = cms.bool(@useMVA),	
    tmvaInput = simpleDiscriminator
    )
