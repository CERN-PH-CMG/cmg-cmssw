import FWCore.ParameterSet.Config as cms

from CMGTools.HtoZZ2l2nu.MVAStudyConfig_cfi import *

datapileup_pixelbased_2011=cms.vdouble(1.22825e+07,5.33316e+07,1.27819e+08,2.21102e+08,3.09325e+08,3.74101e+08,4.09049e+08,4.17488e+08,4.06878e+08,3.84466e+08,3.55412e+08,3.22755e+08,2.88141e+08,2.52593e+08,2.17008e+08,1.82346e+08,1.49605e+08,1.19698e+08,9.33203e+07,7.08679e+07,5.24176e+07,3.77691e+07,2.65207e+07,1.81566e+07,1.21265e+07,7.90616e+06,5.03513e+06,3.13451e+06,1.90872e+06,1.1377e+06,664248,380148,213407,117609,63687.5,0)

datapileup_683_2012 = cms.vdouble( 31654.5, 1937.57, 554132, 3.85338e+07, 5.88243e+07, 1.5479e+06, 589451, 596876, 2.39864e+06, 1.99268e+07, 1.05773e+08, 2.57414e+08, 3.98854e+08, 5.1164e+08, 6.09781e+08, 6.88201e+08, 7.18557e+08, 6.74956e+08, 5.63064e+08, 4.23817e+08, 3.01535e+08, 2.11621e+08, 1.51051e+08, 1.12569e+08, 8.7285e+07, 6.84976e+07, 5.31057e+07, 4.01704e+07, 2.94953e+07, 2.09828e+07, 1.44547e+07, 9.64453e+06, 6.23734e+06, 3.91432e+06, 2.38692e+06, 1.41626e+06, 818637, 461385, 253658, 136033, 71132.1, 36240.9, 17973.9, 8668.75, 4061.72, 1847.14, 814.651, 348.193, 144.144, 57.7692, 22.4056, 8.40718, 3.05121, 1.07088, 0.363402, 0.119222, 0.0378096, 0.01159, 0.00343369, 0.000983119, 0.000272011, 7.27238e-05, 1.87866e-05, 4.68896e-06, 1.13068e-06, 2.63398e-07, 5.92758e-08, 1.28858e-08, 2.70582e-09, 5.48807e-10, 1.07512e-10, 2.03419e-11, 3.71715e-12, 6.55994e-13, 1.11801e-13, 1.84006e-14, 2.92449e-15, 4.48835e-16, 6.65167e-17, 9.5186e-18, 1.31523e-18, 1.75474e-19, 2.26043e-20, 2.81147e-21, 3.37622e-22, 3.91449e-23, 4.38189e-24, 4.73569e-25, 4.94122e-26, 4.97748e-27, 4.84065e-28, 4.54477e-29, 4.11936e-30, 3.60457e-31, 3.04493e-32, 2.48313e-33, 1.95486e-34, 1.48567e-35, 1.08997e-36, 7.71953e-38 )


datapileupToUse=datapileup_683_2012
import os
try:
    cmssw_version = os.environ["CMSSW_VERSION"].replace("CMSSW_","")
except:
    cmssw_version = "5_X"
if cmssw_version.startswith("4") : datapileupToUse=datapileup_pixelbased_2011

runProcess = cms.PSet(
    input = cms.string("@input"),
    outdir = cms.string("@outdir"),
    isMC = cms.bool(@isMC),
    mctruthmode=cms.int32(@mctruthmode),
    runBlinded = cms.bool(True),
    xsec = cms.double(@xsec),	
    saveSummaryTree = cms.bool(@saveSummaryTree),
    runSystematics = cms.bool(@runSystematics),	
    weightsFile = cms.string("@weightsFile"),	 
    hqtWeightsFile = cms.string("${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/HiggsQtWeights.root"),
    evStart = cms.int32(0),
    evEnd = cms.int32(-1),
    dirName = cms.string("evAnalyzer/data"),
    ptResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PtResolution_AK5PF.txt"),
    phiResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PhiResolution_AK5PF.txt"),
    etaResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_EtaResolution_AK5PF.txt"),
    jesUncFileName = cms.string("${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/GR_R_42_V23_AK5PFchs_Uncertainty.txt"),
    #datapileup = datapileup_683_2012,
    datapileup = datapileupToUse,
    #gammaCategories        = cms.vint32 (20,      30,      50,      75,     90,       125,  135,   999999),
    #gammaTriggerRenWeights = cms.vdouble(638.010, 152.633, 14.622,  2.029,  0.345,   1.011, 0.237, 0.   ), 
    gammaCategories        = cms.vint32 (20,      30,      50,      75,      90,      135,      999999),
    gammaTriggerRenWeights = cms.vdouble(28.883,  13.570,  1,       0.18185, 0.00803, 0.005702, 0.),
    useMVA = cms.bool(@useMVA),	
    tmvaInput = simpleDiscriminator
    )
