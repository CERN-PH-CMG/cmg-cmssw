import FWCore.ParameterSet.Config as cms

from CMGTools.HtoZZ2l2nu.MVAStudyConfig_cfi import *

datapileup_pixelbased_2011=cms.vdouble(1.22825e+07,5.33316e+07,1.27819e+08,2.21102e+08,3.09325e+08,3.74101e+08,4.09049e+08,4.17488e+08,4.06878e+08,3.84466e+08,3.55412e+08,3.22755e+08,2.88141e+08,2.52593e+08,2.17008e+08,1.82346e+08,1.49605e+08,1.19698e+08,9.33203e+07,7.08679e+07,5.24176e+07,3.77691e+07,2.65207e+07,1.81566e+07,1.21265e+07,7.90616e+06,5.03513e+06,3.13451e+06,1.90872e+06,1.1377e+06,664248,380148,213407,117609,63687.5,0)

datapileup_69400_2012=cms.vdouble(1.17628e-05,8.65473e-05,0.000355701,0.0010509,0.00247692,0.00493665,0.00863531,0.0136014,0.0196542,0.0264269,0.0334361,0.040171,0.0461776,0.0511162,0.0547857,0.057118,0.0581525,0.0580022,0.0568207,0.0547763,0.0520349,0.048751,0.0450653,0.041106,0.0369907,0.0328283,0.0287196,0.0247555,0.0210149,0.0175616,0.0144422,0.0116847,0.00929914,0.00727881,0.00560348,0.00424276,0.00315989,0.00231519,0.00166905,0.00118415,0.000827001,0.000568691,0.00038516,0.000256997,0.000168995,0.000109552,7.00361e-05,4.41706e-05,2.74931e-05,1.68954e-05,1.02555e-05,6.15167e-06,3.64835e-06,2.14045e-06,1.24303e-06,7.15013e-07,4.07679e-07,2.30593e-07,1.29503e-07,7.22831e-08,4.01396e-08,2.22007e-08,1.22439e-08,6.74125e-09,3.70955e-09,2.04234e-09,1.12607e-09,6.22247e-10,3.44791e-10,1.91631e-10,1.06834e-10,5.97309e-11,3.34776e-11,1.87988e-11,1.05691e-11,5.94509e-12,3.3433e-12,1.87838e-12,1.05365e-12,5.89734e-13,3.29186e-13,1.83172e-13,1.01566e-13,5.61019e-14,3.08631e-14,1.69063e-14,9.22012e-15,5.0056e-15,2.70501e-15,1.45495e-15,7.78894e-16,4.14999e-16,2.20064e-16,1.16141e-16,6.10047e-17,3.18922e-17,1.65943e-17,8.59407e-18,4.43011e-18,2.27311e-18)

datapileup_70000_2012=cms.vdouble(1.10069e-05,8.12531e-05,0.000335113,0.0009939,0.00235205,0.00470699,0.00826724,0.0130744,0.0189677,0.0256032,0.0325163,0.0392083,0.0452283,0.050232,0.0540083,0.0564769,0.0576651,0.0576758,0.0566547,0.0547649,0.0521685,0.0490174,0.0454499,0.0415921,0.0375592,0.0334583,0.029389,0.0254417,0.0216962,0.0182184,0.015058,0.0122472,0.00979995,0.00771401,0.00597285,0.00454921,0.00340858,0.00251274,0.00182275,0.00130136,0.000914656,0.000633016,0.000431505,0.000289799,0.000191814,0.000125162,8.05426e-05,5.11316e-05,3.20352e-05,1.98158e-05,1.21067e-05,7.3092e-06,4.36266e-06,2.57574e-06,1.50514e-06,8.71069e-07,4.99612e-07,2.84222e-07,1.60507e-07,9.0064e-08,5.02651e-08,2.79325e-08,1.54729e-08,8.55379e-09,4.72461e-09,2.61016e-09,1.44373e-09,8.00162e-10,4.44636e-10,2.47814e-10,1.38545e-10,7.76863e-11,4.36753e-11,2.4606e-11,1.3883e-11,7.83887e-12,4.42625e-12,2.49758e-12,1.40739e-12,7.915e-13,4.44016e-13,2.48345e-13,1.38436e-13,7.68848e-14,4.25317e-14,2.34301e-14,1.28514e-14,7.01763e-15,3.8146e-15,2.06394e-15,1.11151e-15,5.95783e-16,3.17842e-16,1.68765e-16,8.91873e-17,4.69116e-17,2.45595e-17,1.27978e-17,6.63793e-18,3.42711e-18)

datapileup_70300_2012=cms.vdouble(1.06491e-05,7.87385e-05,0.000325298,0.000966625,0.00229207,0.00459627,0.00808911,0.0128183,0.0186329,0.0251997,0.0320638,0.0387326,0.0447571,0.0497909,0.0536181,0.0561526,0.0574159,0.0575055,0.0565635,0.0547501,0.0522256,0.0491405,0.0456323,0.0418256,0.0378347,0.0337659,0.0297178,0.0257806,0.0220346,0.0185463,0.0153672,0.012531,0.010054,0.00793595,0.00616222,0.00470715,0.00353743,0.00261563,0.00190323,0.00136306,0.000961041,0.000667235,0.00045629,0.000307434,0.000204146,0.000133643,8.62803e-05,5.49529e-05,3.45416e-05,2.14357e-05,1.31388e-05,7.9578e-06,4.76493e-06,2.8221e-06,1.65421e-06,9.60247e-07,5.52395e-07,3.15152e-07,1.78468e-07,1.00408e-07,5.61795e-08,3.12932e-08,1.7373e-08,9.62392e-09,5.32574e-09,2.94737e-09,1.63286e-09,9.0633e-10,5.04344e-10,2.81479e-10,1.57583e-10,8.84871e-11,4.98219e-11,2.81137e-11,1.58893e-11,8.98828e-12,5.08531e-12,2.87552e-12,1.62397e-12,9.15442e-13,5.14801e-13,2.88666e-13,1.61333e-13,8.98416e-14,4.98354e-14,2.75302e-14,1.51432e-14,8.29278e-15,4.52082e-15,2.45322e-15,1.32505e-15,7.12355e-16,3.81168e-16,2.02998e-16,1.07602e-16,5.67694e-17,2.98109e-17,1.55817e-17,8.10665e-18,4.19827e-18)

datapileup_71000_2012=cms.vdouble(9.86376e-06,7.31939e-05,0.000303567,0.00090599,0.0021582,0.0043481,0.00768818,0.0122394,0.0178727,0.0242796,0.0310273,0.0376378,0.043667,0.0487646,0.0527046,0.0553873,0.0568206,0.0570905,0.0563298,0.0546924,0.0523341,0.0494025,0.0460323,0.042346,0.0384553,0.0344641,0.0304692,0.0265602,0.0228175,0.0193096,0.0160909,0.0131993,0.0106557,0.0084646,0.00661592,0.00508775,0.00384975,0.0028665,0.00210061,0.00151527,0.00107615,0.000752657,0.000518528,0.000351978,0.000235481,0.000155318,0.000101032,6.48355e-05,4.10617e-05,2.56742e-05,1.5855e-05,9.67465e-06,5.83582e-06,3.48165e-06,2.05553e-06,1.20165e-06,6.96042e-07,3.99773e-07,2.27857e-07,1.28992e-07,7.25992e-08,4.06651e-08,2.26938e-08,1.26322e-08,7.02168e-09,3.90185e-09,2.16978e-09,1.20856e-09,6.74738e-10,3.77775e-10,2.12162e-10,1.1952e-10,6.75225e-11,3.82393e-11,2.16958e-11,1.23241e-11,7.00384e-12,3.9793e-12,2.25874e-12,1.28007e-12,7.23873e-13,4.08256e-13,2.29539e-13,1.28611e-13,7.17907e-14,3.99137e-14,2.20982e-14,1.21817e-14,6.68536e-15,3.65234e-15,1.9862e-15,1.07513e-15,5.79258e-16,3.10639e-16,1.6581e-16,8.80928e-17,4.65854e-17,2.45216e-17,1.28483e-17,6.70122e-18)

mcpileup_tsg=cms.vdouble(0,0,0,0,0,0,0,0,0,0,0,0,6,9,14,28,56,106,212,339,549,848,1210,1727,2197,2857,3589,4303,4786,5202,5632,5941,5835,5660,5248,4886,4459,3764,3199,2623,2119,1609,1176,891,661,508,351,228,137,102,64,47,17,11,11,4,5,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)

blinding=True
if(@is2011):
   datapileupToUse=datapileup_pixelbased_2011
   blinding=False
else:
#   datapileupToUse=datapileup_69400_2012
#   datapileupToUse=datapileup_70000_2012
   datapileupToUse=datapileup_70300_2012
#   datapileupToUse=datapileup_71000_2012  	
   blinding=False

#use this if you don't want to apply any weight
#datapileupToUse=cms.vdouble()

runProcess = cms.PSet(
    input = cms.string("@input"),
    outdir = cms.string("@outdir"),
    isMC = cms.bool(@isMC),
    is2011 = cms.bool(@is2011),
    mctruthmode=cms.int32(@mctruthmode),
    runBlinded = cms.bool(blinding),
    xsec = cms.double(@xsec),	
    saveSummaryTree = cms.bool(@saveSummaryTree),
    runSystematics = cms.bool(@runSystematics),	
    weightsFile = cms.vstring(@weightsFile),	 
    hqtWeightsFile = cms.vstring(
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/HiggsQtWeights.root",
	"${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/LineShapeWeights.root"		
    ),
    evStart = cms.int32(0),
    evEnd = cms.int32(-1),
    dirName = cms.string("evAnalyzer/data"),
    ptResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PtResolution_AK5PF.txt"),
    phiResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PhiResolution_AK5PF.txt"),
    etaResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_EtaResolution_AK5PF.txt"),
    jesUncFileName = cms.string("${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/GR_R_42_V23_AK5PFchs_Uncertainty.txt"),
    #datapileup = datapileup_683_2012,
    datapileup = datapileupToUse,
    useMVA = cms.bool(@useMVA),	
    tmvaInput = simpleDiscriminator
    )
