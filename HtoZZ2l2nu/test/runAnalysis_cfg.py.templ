import FWCore.ParameterSet.Config as cms

from CMGTools.HtoZZ2l2nu.MVAStudyConfig_cfi import *

datapileup_pixelbased_2011=cms.vdouble(1.22825e+07,5.33316e+07,1.27819e+08,2.21102e+08,3.09325e+08,3.74101e+08,4.09049e+08,4.17488e+08,4.06878e+08,3.84466e+08,3.55412e+08,3.22755e+08,2.88141e+08,2.52593e+08,2.17008e+08,1.82346e+08,1.49605e+08,1.19698e+08,9.33203e+07,7.08679e+07,5.24176e+07,3.77691e+07,2.65207e+07,1.81566e+07,1.21265e+07,7.90616e+06,5.03513e+06,3.13451e+06,1.90872e+06,1.1377e+06,664248,380148,213407,117609,63687.5,0)

#datapileup_710_2012=cms.vdouble(1.91404e-05,0.000127611,0.000496681,0.00139434,0.00313006,0.005966,0.0100386,0.0153194,0.0216147,0.0285914,0.0358154,0.0427981,0.0490519,0.0541485,0.0577729,0.0597599,0.060105,0.0589484,0.0565373,0.0531772,0.049185,0.0448509,0.0404151,0.0360581,0.031903,0.0280238,0.0244577,0.0212163,0.0182952,0.0156815,0.0133576,0.0113045,0.00950236,0.00793167,0.0065729,0.00540677,0.00441424,0.00357668,0.00287604,0.00229508,0.00181762,0.00142865,0.00111453,0.000863046,0.000663415,0.00050627,0.000383587,0.000288581,0.000215593,0.000159957,0.000117873,8.62785e-05,6.2735e-05,4.53181e-05,3.25256e-05,2.31956e-05,1.6438e-05,1.15767e-05,8.10311e-06,5.6374e-06,3.89851e-06,2.68004e-06,1.83163e-06,1.24456e-06,8.40821e-07,5.64846e-07,3.77332e-07,2.50673e-07,1.6562e-07,1.08833e-07,7.11339e-08,4.62474e-08,2.991e-08,1.92436e-08,1.23175e-08,7.84414e-09,4.97026e-09,3.13361e-09,1.96592e-09,1.22733e-09,7.62527e-10,4.71483e-10,2.90145e-10,1.77715e-10,1.08345e-10,6.57497e-11,3.97187e-11,2.38854e-11,1.42997e-11,8.523e-12,5.05768e-12,2.98827e-12,1.75799e-12,1.02981e-12,6.00703e-13,3.48933e-13,2.01846e-13,1.16282e-13,6.6716e-14,3.81236e-14)

datapileup_710_2012=cms.vdouble(1.5451e-05,0.000100788,0.000396626,0.00113891,0.00262914,0.00516402,0.00895023,0.0140333,0.0202608,0.0272874,0.0346216,0.0417011,0.0479804,0.053012,0.0565029,0.058339,0.0585761,0.0574044,0.0550985,0.0519659,0.0483029,0.044365,0.0403523,0.0364078,0.0326242,0.0290553,0.0257273,0.0226496,0.019822,0.0172397,0.0148956,0.0127818,0.0108893,0.00920829,0.00772776,0.0064353,0.00531732,0.00435924,0.00354589,0.00286185,0.0022919,0.00182139,0.00143648,0.0011244,0.000873587,0.000673742,0.000515851,0.000392138,0.00029599,0.00022186,0.000165153,0.000122105,8.96737e-05,6.54205e-05,4.74151e-05,3.41437e-05,2.44304e-05,1.73704e-05,1.22738e-05,8.61939e-06,6.0163e-06,4.17416e-06,2.87891e-06,1.97393e-06,1.34559e-06,9.12007e-07,6.14631e-07,4.11897e-07,2.74504e-07,1.81936e-07,1.19929e-07,7.8631e-08,5.12798e-08,3.32667e-08,2.14686e-08,1.37834e-08,8.80413e-09,5.59523e-09,3.53812e-09,2.22623e-09,1.39391e-09,8.68533e-10,5.38572e-10,3.32375e-10,2.04155e-10,1.24813e-10,7.59525e-11,4.60076e-11,2.77422e-11,1.6653e-11,9.95184e-12,5.92094e-12,3.50729e-12,2.06854e-12,1.21475e-12,7.10314e-13,4.13596e-13,2.39816e-13,1.38476e-13,7.963e-14)

mcpileup_tsg=cms.vdouble(0,0,0,0,0,0,0,0,0,0,0,0,6,9,14,28,56,106,212,339,549,848,1210,1727,2197,2857,3589,4303,4786,5202,5632,5941,5835,5660,5248,4886,4459,3764,3199,2623,2119,1609,1176,891,661,508,351,228,137,102,64,47,17,11,11,4,5,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)

blinding=True
if(@is2011):
   datapileupToUse=datapileup_pixelbased_2011
   #datapileupToUse=datapileup_710_2012
   blinding=False
else:
   datapileupToUse=datapileup_710_2012
   blinding=False
#use this if you don't want to apply any weight
#datapileupToUse=cms.vdouble()

runProcess = cms.PSet(
    input = cms.string("@input"),
    outdir = cms.string("@outdir"),
    isMC = cms.bool(@isMC),
    is2011 = cms.bool(@is2011),
    mctruthmode=cms.int32(@mctruthmode),
    runBlinded = cms.bool(blinding),
    xsec = cms.double(@xsec),	
    saveSummaryTree = cms.bool(@saveSummaryTree),
    runSystematics = cms.bool(@runSystematics),	
    weightsFile = cms.vstring(@weightsFile),	 
    hqtWeightsFile = cms.string("${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/HiggsQtWeights.root"),
    evStart = cms.int32(0),
    evEnd = cms.int32(-1),
    dirName = cms.string("evAnalyzer/data"),
    ptResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PtResolution_AK5PF.txt"),
    phiResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_PhiResolution_AK5PF.txt"),
    etaResolFileName = cms.string("${CMSSW_RELEASE_BASE}/src/CondFormats/JetMETObjects/data/Spring10_EtaResolution_AK5PF.txt"),
    jesUncFileName = cms.string("${CMSSW_BASE}/src/CMGTools/HtoZZ2l2nu/data/GR_R_42_V23_AK5PFchs_Uncertainty.txt"),
    #datapileup = datapileup_683_2012,
    datapileup = datapileupToUse,
    useMVA = cms.bool(@useMVA),	
    tmvaInput = simpleDiscriminator
    )
